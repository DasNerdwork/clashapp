var executeOnlyOnce=!0;function ready(e){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}const ws=new WebSocket("wss://websocket.dasnerdwork.net/");function addToFile(e){let t={champname:e.getElementsByTagName("span")[0].innerText,champid:e.getElementsByTagName("img")[0].dataset.id,teamid:window.location.pathname.split("/team/")[1],request:"add"};ws.send(JSON.stringify(t))}function removeFromFile(e){let t={champname:e.getElementsByTagName("span")[0].innerText,champid:e.getElementsByTagName("img")[0].dataset.id,teamid:window.location.pathname.split("/team/")[1],request:"remove"};ws.send(JSON.stringify(t))}function modifyTeamRating(e,t){const n=new Date;n.setDate(n.getDate()+365);let a="expires="+n.toUTCString(),s=window.location.pathname.split("/team/")[1];document.cookie=s+"="+e+";"+a+";";let l={hash:t,rating:e,teamid:s,request:"rate"};ws.send(JSON.stringify(l))}function showIdentityNotice(e){e?document.getElementById("identityNotice").classList.replace("hidden","block"):document.getElementById("identityNotice").classList.replace("block","hidden")}function addHistoryMessage(e){const t=document.getElementById("historyContainer"),n=document.createElement("span");n.classList.add("text-[#8984a5]"),__(e).then((function(e){n.innerText=e,t.insertBefore(n,t.firstChild.nextSibling)}))}function addCustomHistoryMessage(e,t,n,a,s){a=a||"",s=s||"";const l=document.getElementById("historyContainer"),i=document.createElement("span");__(e).then((function(e){i.innerHTML="<span class='text-"+n+"/100'>"+t+"</span> "+e.replace("%1",a).replace("%2",s),l.insertBefore(i,l.firstChild.nextSibling)}))}function makeDragDroppable(){let e=document.getElementsByClassName("hoverer");for(i=0;i<e.length;i++)e[i].classList.contains("locked")||(e[i].addEventListener("dragstart",t),e[i].addEventListener("drop",n),e[i].addEventListener("dragenter",s),e[i].addEventListener("dragover",a));function t(e){if(!e.srcElement.parentElement.classList.contains("locked"))return e.dataTransfer.setData("fromID",e.srcElement.previousSibling.dataset.id),e.dataTransfer.setData("fromName",e.srcElement.parentElement.parentElement.getElementsByTagName("span")[0].innerText),e.dataTransfer.setData("isDraggable",e.srcElement.parentElement.classList),e.dataTransfer.setDragImage(e.srcElement.previousSibling,24,24),oldIndex=getChildIndex(e.srcElement.parentElement.parentElement);e.preventDefault()}function n(e){if(e.srcElement.parentElement.classList.contains("locked"))e.preventDefault();else{var t=e.dataTransfer.getData("fromID"),n=e.dataTransfer.getData("fromName"),a=e.srcElement.previousSibling.dataset.id,l=e.srcElement.parentElement.parentElement.getElementsByTagName("span")[0].innerText;if(s(e),"hoverer group"!=e.dataTransfer.getData("isDraggable"))s(e);else{let e={fromName:n,fromID:t,toName:l,toID:a,teamid:window.location.pathname.split("/team/")[1],request:"swap"};ws.send(JSON.stringify(e))}}}function a(e){s(e),e.target.parentElement.classList.contains("locked")?e.dataTransfer.dropEffect="none":e.dataTransfer.dropEffect="move"}function s(e){return e.preventDefault(),e.stopPropagation(),!1}}function addContextMenuToSelectedBans(){let e=document.getElementsByClassName("selected-ban-champion");Array.from(e).forEach((e=>{e.firstChild.oncontextmenu=customBanContextMenu,document.onclick=hideCustomBanContextMenu}))}function hideCustomBanContextMenu(){document.getElementById("customBanContextMenu")&&(document.getElementById("customBanContextMenu").classList.replace("opacity-100","opacity-0"),setTimeout((()=>{document.getElementById("customBanContextMenu").style.left="0px",document.getElementById("customBanContextMenu").style.top="0px"}),75)),document.getElementById("customBanUnlockMenu")&&(document.getElementById("customBanUnlockMenu").classList.replace("opacity-100","opacity-0"),setTimeout((()=>{document.getElementById("customBanUnlockMenu").style.left="0px",document.getElementById("customBanUnlockMenu").style.top="0px"}),75))}function customBanContextMenu(e){if(e.preventDefault(),2===e.button)if(document.getElementById("customBanContextMenu").classList.contains("opacity-100")||document.getElementById("customBanUnlockMenu").classList.contains("opacity-100"))if(e.target.parentElement.classList.contains("locked")){let t=document.getElementById("customBanUnlockMenu");t.style.left=e.pageX+"px",t.style.top=e.pageY+"px"}else{let t=document.getElementById("customBanContextMenu");t.style.left=e.pageX+"px",t.style.top=e.pageY+"px"}else{if(e.target.parentElement.classList.contains("locked")){let t=document.getElementById("customBanUnlockMenu");t.classList.replace("opacity-0","opacity-100"),t.style.left=e.pageX+"px",t.style.top=e.pageY+"px"}else{let t=document.getElementById("customBanContextMenu");t.classList.replace("opacity-0","opacity-100"),t.style.left=e.pageX+"px",t.style.top=e.pageY+"px"}currentSelectedContextMenuElement=e.target.parentElement.parentElement}}function lockSelectedBan(e,t=!0){e.firstChild.classList.add("locked"),e.firstChild.draggable=!1,e.firstChild.onclick=null;let n=e.firstChild.firstChild;if(n.style.filter="url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg'><filter id='grayscale'><feColorMatrix type='matrix' values='0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 0 1 0'/></filter></svg>#grayscale\")",n.style.filter="gray",n.style.WebkitFilter="grayscale(100%)",n.nextSibling.classList.add("hidden"),t){let t={index:Array.from(e.parentElement.children).indexOf(e),champname:e.firstChild.nextSibling.innerText,champid:e.getElementsByTagName("img")[0].dataset.id,teamid:window.location.pathname.split("/team/")[1],request:"lock"};ws.send(JSON.stringify(t))}}function unlockSelectedBan(e,t=!0){e.firstChild.classList.remove("locked"),e.firstChild.draggable=!0,e.firstChild.onclick=function(){};let n=e.firstChild.firstChild;if(n.style.filter="",n.style.WebkitFilter="",n.nextSibling.classList.remove("hidden"),t){let t={index:Array.from(e.parentElement.children).indexOf(e),champname:e.firstChild.nextSibling.innerText,champid:e.getElementsByTagName("img")[0].dataset.id,teamid:window.location.pathname.split("/team/")[1],request:"unlock"};ws.send(JSON.stringify(t))}}function getVersionedUrl(e){return fetch(e).then((e=>{const t=e.headers.get("Last-Modified");return t?new Date(t).getTime():null})).then((t=>null!==t?e+"?version="+t:e)).catch((t=>(console.error("Error fetching or extracting Last-Modified:",t),e)))}ws.onopen=e=>{if(null!=document.getElementById("highlighter"))var t=document.getElementById("highlighter").innerText;else t="";let n={teamid:window.location.pathname.split("/team/")[1],name:t,request:"firstConnect"};ws.send(JSON.stringify(n))},ws.onmessage=e=>{if("{"==Array.from(e.data)[0]){var t=JSON.parse(e.data),n=document.getElementById("selectedBans");if(t.hasOwnProperty("SuggestedBans")){var a=0;if(t.Status>a){a=t.Status;var s="";let e=0;fetch("https://clashscout.com/clashapp/data/patch/version.txt").then((e=>e.text())).then((a=>{const l=[...t.SuggestedBans.map((e=>getVersionedUrl("/clashapp/data/patch/"+a+"/img/champion/"+e.id+".webp"))),getVersionedUrl("/clashapp/data/misc/RemovalOverlay.webp")];Promise.all(l).then((a=>{const l=a.slice(0,t.SuggestedBans.length),i=a.pop();l.forEach(((a,l)=>{const o=t.SuggestedBans[l],r=a,c=i;executeOnlyOnce?(s+='<div class="selected-ban-champion h-fit fullhd:w-16 twok:w-24 opacity-0" style="animation: .5s ease-in-out '+e+'s 1 fadeIn; animation-fill-mode: forwards;"><div class="hoverer group'+("locked"===o.status?" locked":"")+'" '+("locked"===o.status?'draggable="false" ':'draggable="true" ')+'onclick="'+("locked"===o.status?"":"removeFromFile(this.parentElement);")+'"><img class="selected-ban-icon twok:max-h-14 fullhd:max-h-11" data-id="'+o.id+'" src="'+r+'" style="filter: '+("locked"===o.status?"grayscale(100%)":"none")+'" alt="A champion icon of the league of legends champion '+o.name+'"><img class="removal-overlay twok:max-h-14 fullhd:max-h-11 twok:-mt-14 opacity-0 group-hover:opacity-100'+("locked"===o.status?" hidden":"")+'" src="'+c+'" alt="Removal overlay icon in red"></div><span class="selected-ban-caption block">'+o.name+"</span></div>",e+=.1):(n.innerHTML.includes("/champion/"+o.id+".webp")?s+='<div class="selected-ban-champion h-fit fullhd:w-16 twok:w-24">':s+='<div class="selected-ban-champion h-fit fullhd:w-16 twok:w-24" style="animation: .1s ease-in-out 0s 1 slideIn; animation-fill-mode: forwards;">',s+='<div class="hoverer group'+("locked"===o.status?" locked":"")+'" '+("locked"===o.status?"":' draggable="true"')+'" '+("locked"===o.status?"":'onclick="removeFromFile(this.parentElement);"')+'><img class="selected-ban-icon twok:max-h-14 fullhd:max-h-11" data-id="'+o.id+'" src="'+r+'" style="filter: '+("locked"===o.status?"grayscale(100%)":"none")+'" alt="A champion icon of the league of legends champion '+o.name+'"><img class="removal-overlay twok:max-h-14 fullhd:max-h-11 fullhd:-mt-11 twok:-mt-14 opacity-0 group-hover:opacity-100'+("locked"===o.status?" hidden":"")+'" src="'+c+'" alt="Removal overlay icon in red"></div><span class="selected-ban-caption block">'+o.name+"</span></div>")})),executeOnlyOnce=!1,n.innerHTML=s,banSearchContainer=document.getElementById("banSearch").parentElement,champSelectorContainer=document.getElementById("champSelect"),t.SuggestedBans.length>=6?(banSearchContainer.classList.replace("twok:h-[16.5rem]","twok:h-[10.5rem]"),banSearchContainer.classList.replace("fullhd:h-[17rem]","fullhd:h-[12rem]"),champSelectorContainer.classList.replace("twok:h-[13rem]","twok:h-[7.5rem]"),champSelectorContainer.classList.replace("fullhd:h-[13.5rem]","fullhd:h-[9rem]"),n.parentElement.classList.replace("pb-3","pb-1")):(banSearchContainer.classList.replace("twok:h-[10.5rem]","twok:h-[16.5rem]"),banSearchContainer.classList.replace("fullhd:h-[12rem]","fullhd:h-[17rem]"),champSelectorContainer.classList.replace("twok:h-[7.5rem]","twok:h-[13rem]"),champSelectorContainer.classList.replace("fullhd:h-[9rem]","fullhd:h-[13.5rem]"),n.parentElement.classList.replace("pb-1","pb-3")),makeDragDroppable();addContextMenuToSelectedBans()})).catch((e=>{console.error("Error fetching versioned URLs:",e)}))}))}}else if("ElementAlreadyInArray"==t.status){var l=new Date;alert("["+l.toLocaleTimeString()+"] Dieser Champion wurde bereits ausgewählt.\n")}else if("MaximumElementsExceeded"==t.status){l=new Date;alert("["+l.toLocaleTimeString()+"] Die maximale Anzahl an ausgewählten Champions wurde erreicht.\n")}else if("CodeInjectionDetected"==t.status){l=new Date;alert("["+l.toLocaleTimeString()+"] WARNUNG: Dieser Code Injection Versuch wurde geloggt und dem Administrator mitgeteilt.\n")}else if("InvalidTeamID"==t.status){l=new Date;alert("["+l.toLocaleTimeString()+"] Die Anfrage für diese Team ID ist nicht gültig.\n")}else if("FileDidNotExist"==t.status)window.location.reload();else if("Update"==t.status);else if("FirstConnect"==t.status)if(null!=document.getElementById("highlighter")){document.getElementById("highlighter").classList.add("underline","text-"+t.color+"/100")}else{const e=document.createElement("div"),n=document.createElement("img"),a=document.createElement("span"),s=document.createElement("p");switch(e.style.marginTop="-13px",t.name){case"Krug":case"Wolf":e.style.marginLeft="-5.75rem";break;case"Nashor":case"Herald":case"Minion":case"Raptor":case"Gromp":e.style.marginLeft="-6.75rem";break;case"Sentinel":case"Scuttler":e.style.marginLeft="-7rem";break;case"Brambleback":e.style.marginLeft="-10rem";break;default:e.style.marginLeft="-9rem"}e.setAttribute("onmouseover","showIdentityNotice(true)"),e.setAttribute("onmouseout","showIdentityNotice(false)"),a.setAttribute("onmouseover","showIdentityNotice(true)"),a.setAttribute("onmouseout","showIdentityNotice(false)"),e.classList.add("z-20","w-40","h-8"),getVersionedUrl("/clashapp/data/misc/monsters/"+t.name.toLowerCase()+".webp").then((e=>{n.src=e})),n.width="32",n.alt="An icon of a random monster from League of Legends",n.classList.add("align-middle","mr-2.5","no-underline","inline-flex"),s.id="highlighter",s.classList.add("inline","underline","decoration-2","text-"+t.color+"/100"),s.style.textDecorationSkipInk="none",a.classList.add("text-white"),a.innerText=t.name,s.appendChild(a),e.appendChild(n),e.appendChild(s),document.getElementById("highlighterAfter").insertBefore(e,null);const l=document.getElementById("identityNotice");l.setAttribute("onmouseover","showIdentityNotice(true)"),l.setAttribute("onmouseout","showIdentityNotice(false)")}else"Message"==t.status?"added %1."==t.message||"removed %1."==t.message?addCustomHistoryMessage(t.message,t.name,t.color,t.champ):"swapped %1 with %2."==t.message?addCustomHistoryMessage(t.message,t.name,t.color,t.champ1,t.champ2):addCustomHistoryMessage(t.message,t.name,t.color):"Lock"==t.status?(addCustomHistoryMessage(t.message,t.name,t.color,t.champ),lockSelectedBan(document.getElementById("selectedBans").children[t.index],!1)):"Unlock"==t.status&&(addCustomHistoryMessage(t.message,t.name,t.color,t.champ),unlockSelectedBan(document.getElementById("selectedBans").children[t.index],!1))}else addHistoryMessage(e.data)},ws.onclose=e=>{clearTimeout(this.pingTimeout)},ws.onerror=e=>{console.error("WebSocket Error:",e)};
