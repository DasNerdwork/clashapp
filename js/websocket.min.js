var executeOnlyOnce=!0;function ready(e){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}const ws=new WebSocket("wss://websocket.dasnerdwork.net/");function addToFile(e){let t={champname:e.getElementsByTagName("span")[0].innerText,champid:e.getElementsByTagName("img")[0].dataset.id,teamid:window.location.pathname.split("/team/")[1],request:"add"};ws.send(JSON.stringify(t))}function removeFromFile(e){let t={champname:e.getElementsByTagName("span")[0].innerText,champid:e.getElementsByTagName("img")[0].dataset.id,teamid:window.location.pathname.split("/team/")[1],request:"remove"};ws.send(JSON.stringify(t))}function modifyTeamRating(e,t){const a=new Date;a.setDate(a.getDate()+365);let n="expires="+a.toUTCString(),s=window.location.pathname.split("/team/")[1];document.cookie=s+"="+e+";"+n+";";let i={hash:t,rating:e,teamid:s,request:"rate"};ws.send(JSON.stringify(i))}function showIdentityNotice(e){e?document.getElementById("identityNotice").classList.replace("hidden","block"):document.getElementById("identityNotice").classList.replace("block","hidden")}function addHistoryMessage(e){const t=document.getElementById("historyContainer"),a=document.createElement("span");a.classList.add("text-[#333344]"),__(e).then((function(e){a.innerText=e,t.insertBefore(a,t.firstChild.nextSibling)}))}function addCustomHistoryMessage(e,t,a,n,s){n=n||"",s=s||"";const i=document.getElementById("historyContainer"),r=document.createElement("span");__(e).then((function(e){r.innerHTML="<span class='text-"+a+"/100'>"+t+"</span> "+e.replace("%1",n).replace("%2",s),i.insertBefore(r,i.firstChild.nextSibling)}))}function makeDragDroppable(){let e=document.getElementsByClassName("hoverer");for(i=0;i<e.length;i++)e[i].addEventListener("dragstart",t),e[i].addEventListener("drop",a),e[i].addEventListener("dragenter",s),e[i].addEventListener("dragover",n);function t(e){return e.dataTransfer.setData("fromID",e.srcElement.previousSibling.dataset.id),e.dataTransfer.setData("fromName",e.srcElement.parentElement.parentElement.getElementsByTagName("span")[0].innerText),e.dataTransfer.setData("isDraggable",e.srcElement.parentElement.classList),e.dataTransfer.setDragImage(e.srcElement.previousSibling,24,24),oldIndex=getChildIndex(e.srcElement.parentElement.parentElement)}function a(e){var t=e.dataTransfer.getData("fromID"),a=e.dataTransfer.getData("fromName"),n=e.srcElement.previousSibling.dataset.id,i=e.srcElement.parentElement.parentElement.getElementsByTagName("span")[0].innerText;if(s(e),"hoverer group"!=e.dataTransfer.getData("isDraggable"))s(e);else{let e={fromName:a,fromID:t,toName:i,toID:n,teamid:window.location.pathname.split("/team/")[1],request:"swap"};ws.send(JSON.stringify(e))}}function n(e){e.dataTransfer.dropEffect="move",s(e)}function s(e){return e.preventDefault(),e.stopPropagation(),!1}}function expandAllMatches(){}ws.onopen=e=>{if(null!=document.getElementById("highlighter"))var t=document.getElementById("highlighter").innerText;else t="";let a={teamid:window.location.pathname.split("/team/")[1],name:t,request:"firstConnect"};ws.send(JSON.stringify(a))},ws.onmessage=e=>{if("{"==Array.from(e.data)[0]){var t=JSON.parse(e.data),a=document.getElementById("selectedBans");if(t.hasOwnProperty("SuggestedBans")){var n=0;if(t.Status>n){n=t.Status;var s="";let e=0;fetch("https://clashscout.com/clashapp/data/patch/version.txt").then((e=>e.text())).then((n=>{for(const i of t.SuggestedBans)executeOnlyOnce?(s+='<div class="selected-ban-champion h-fit fullhd:w-16 twok:w-24 opacity-0" style="animation: .5s ease-in-out '+e+'s 1 fadeIn; animation-fill-mode: forwards;"><div class="hoverer group" draggable="true" onclick="removeFromFile(this.parentElement);"><img class="selected-ban-icon twok:max-h-14 fullhd:max-h-11" data-id="'+i.id+'" src="/clashapp/data/patch/'+n+"/img/champion/"+i.id+'.webp"><img class="removal-overlay twok:max-h-14 fullhd:max-h-11 fullhd:-mt-11 twok:-mt-14 opacity-0 group-hover:opacity-100" src="/clashapp/data/misc/RemovalOverlay.webp"></div><span class="selected-ban-caption block">'+i.name+"</span></div>",e+=.1):(a.innerHTML.includes("/champion/"+i.id+".webp")?s+='<div class="selected-ban-champion h-fit fullhd:w-16 twok:w-24">':s+='<div class="selected-ban-champion h-fit fullhd:w-16 twok:w-24" style="animation: .1s ease-in-out 0s 1 slideIn; animation-fill-mode: forwards;">',s+='<div class="hoverer group" draggable="true" onclick="removeFromFile(this.parentElement);"><img class="selected-ban-icon twok:max-h-14 fullhd:max-h-11" data-id="'+i.id+'" src="/clashapp/data/patch/'+n+"/img/champion/"+i.id+'.webp"><img class="removal-overlay twok:max-h-14 fullhd:max-h-11 fullhd:-mt-11 twok:-mt-14 opacity-0 group-hover:opacity-100" src="/clashapp/data/misc/RemovalOverlay.webp"></div><span class="selected-ban-caption block">'+i.name+"</span></div>");executeOnlyOnce=!1,a.innerHTML=s,banSearchContainer=document.getElementById("banSearch").parentElement,champSelectorContainer=document.getElementById("champSelect"),t.SuggestedBans.length>=6?(banSearchContainer.classList.replace("twok:h-[16.5rem]","twok:h-[10.5rem]"),banSearchContainer.classList.replace("fullhd:h-[17rem]","fullhd:h-[12rem]"),champSelectorContainer.classList.replace("twok:h-[13rem]","twok:h-[7.5rem]"),champSelectorContainer.classList.replace("fullhd:h-[13.5rem]","fullhd:h-[9rem]"),a.parentElement.classList.replace("pb-3","pb-1")):(banSearchContainer.classList.replace("twok:h-[10.5rem]","twok:h-[16.5rem]"),banSearchContainer.classList.replace("fullhd:h-[12rem]","fullhd:h-[17rem]"),champSelectorContainer.classList.replace("twok:h-[7.5rem]","twok:h-[13rem]"),champSelectorContainer.classList.replace("fullhd:h-[9rem]","fullhd:h-[13.5rem]"),a.parentElement.classList.replace("pb-1","pb-3")),makeDragDroppable()}))}}else if("ElementAlreadyInArray"==t.status){var i=new Date;alert("["+i.toLocaleTimeString()+"] Dieser Champion wurde bereits ausgew채hlt.\n")}else if("MaximumElementsExceeded"==t.status){i=new Date;alert("["+i.toLocaleTimeString()+"] Die maximale Anzahl an ausgew채hlten Champions wurde erreicht.\n")}else if("CodeInjectionDetected"==t.status){i=new Date;alert("["+i.toLocaleTimeString()+"] WARNUNG: Dieser Code Injection Versuch wurde geloggt und dem Administrator mitgeteilt.\n")}else if("InvalidTeamID"==t.status){i=new Date;alert("["+i.toLocaleTimeString()+"] Die Anfrage f체r diese Team ID ist nicht g체ltig.\n")}else if("FileDidNotExist"==t.status)window.location.reload();else if("Update"==t.status);else if("FirstConnect"==t.status)if(null!=document.getElementById("highlighter")){document.getElementById("highlighter").classList.add("underline","text-"+t.color+"/100")}else{const e=document.createElement("div"),a=document.createElement("img"),n=document.createElement("span"),s=document.createElement("p");switch(e.style.marginTop="-13px",t.name){case"Krug":case"Wolf":e.style.marginLeft="-5.75rem";break;case"Nashor":case"Herald":case"Minion":case"Raptor":case"Gromp":e.style.marginLeft="-6.75rem";break;case"Sentinel":case"Scuttler":e.style.marginLeft="-7rem";break;case"Brambleback":e.style.marginLeft="-10rem";break;default:e.style.marginLeft="-9rem"}e.setAttribute("onmouseover","showIdentityNotice(true)"),e.setAttribute("onmouseout","showIdentityNotice(false)"),n.setAttribute("onmouseover","showIdentityNotice(true)"),n.setAttribute("onmouseout","showIdentityNotice(false)"),e.classList.add("z-20","w-40","h-8"),a.src="/clashapp/data/misc/monsters/"+t.name.toLowerCase()+".webp",a.width="32",a.classList.add("align-middle","mr-2.5","no-underline","inline-flex"),s.id="highlighter",s.classList.add("inline","underline","decoration-2","text-"+t.color+"/100"),s.style.textDecorationSkipInk="none",n.classList.add("text-white"),n.innerText=t.name,s.appendChild(n),e.appendChild(a),e.appendChild(s),document.getElementById("highlighterAfter").insertBefore(e,null);const i=document.getElementById("identityNotice");i.setAttribute("onmouseover","showIdentityNotice(true)"),i.setAttribute("onmouseout","showIdentityNotice(false)")}else"Message"==t.status&&("added %1."==t.message||"removed %1."==t.message?addCustomHistoryMessage(t.message,t.name,t.color,t.champ):"swapped %1 with %2."==t.message?addCustomHistoryMessage(t.message,t.name,t.color,t.champ1,t.champ2):addCustomHistoryMessage(t.message,t.name,t.color))}else addHistoryMessage(e.data)},ws.onclose=e=>{clearTimeout(this.pingTimeout)};
